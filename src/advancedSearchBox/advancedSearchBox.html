<ng-template #rt let-r="result" let-t="term">
    {{ r.label}}
  </ng-template>
<ng-container *ngFor="let filter of viewModel; trackBy: trackByFn" >
    <ng-container [ngSwitch]="filter.type" >
        <as-input *ngSwitchCase="'INPUT'" [viewModel]="filter" class="as-filter"></as-input>
        <as-input-operators *ngSwitchCase="'OPERATORS'" [viewModel]="filter" class="as-filter"></as-input-operators>
        <ng-container *ngTemplateOutlet="externalTemplate; context: {$implicit: filter}"></ng-container>
    </ng-container>
</ng-container>
<input id="search" type="text" (selectItem)="addFilter($event)" (focus)="focusInput$.next()" 
[(ngModel)]="searchBox" (keydown)="keydown($event)" [ngbTypeahead]="searchBoxFunc" 
[resultTemplate]="rt" [inputFormatter]="formatter" #searchbox #searchboxModel="ngModel" placeholder="Cerca" autosize/>
